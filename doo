#!/usr/bin/env php
<?php


if($argv[1] == "init") {

$autoload = <<< EOPAGE
PD9waHANCg0KbmFtZXNwYWNlIERvbzsNCg0KLyoqDQoqIEF1dG9sb2FkZXINCiovDQpjbGFzcyBBdXRvbG9hZA0Kew0KDQoJcHVibGljIHN0YXRpYyBmdW5jdGlvbiByZWdpc3RlcigpDQoJew0KDQoJCXNwbF9hdXRvbG9hZF9yZWdpc3RlcihbX19DTEFTU19fLCAibG9hZCJdKTsNCg0KCX0NCg0KCXByaXZhdGUgc3RhdGljIGZ1bmN0aW9uIGxvYWQoJGNsYXNzKQ0KCXsNCg0KCQkkY2xhc3MgPSBzdHJfcmVwbGFjZShfX05BTUVTUEFDRV9fIC4gIlxcIiwgIiIsICRjbGFzcyk7DQoNCgkJJGNsYXNzID0gX19ESVJfXyAuICcvJyAuICRjbGFzczsNCg0KCQkkY2xhc3MgPSBzdHJfcmVwbGFjZSgiXFwiLCAiLyIsICRjbGFzcyk7DQoNCgkJcmVxdWlyZSAkY2xhc3MgLiAnLnBocCc7DQoNCgl9DQoNCn0NCg==
EOPAGE;

$doo = <<< EOPAGE
PD9waHANCg0KLyoqDQoqIFBIUCwgdW5lIGNsYXNzZSBQSFAgc2ltcGxlLiBEYW5zIGxlIGJ1dCBzaW1wbGlmacOpIGwndXRpbGlzYXRpb24gZGUgUERPDQoqIEBhdXRob3IgRGFraWEgRnJhbmNrIDxkYWtpYWZyYW5ja2luZm9AZ21haWwuY29tPg0KKiBAcGFja2FnZSBEb287DQoqIEB2ZXJzaW9uIDAuMS4wDQoqLw0KbmFtZXNwYWNlIERvbzsNCg0KLyoqDQogKiBDbGFzcyBEb28NCiAqDQogKiBAcGFja2FnZSBEb28NCiAqLw0KY2xhc3MgRG9vIHsNCg0KICAgIC8qKg0KICAgICogU3VwZXIgY29uc3RhbnRlLCBwZXJtZXRhbnQgZGUgc2ltcGxpZmllciBsZSBpbmZvcm1hdGlvbiBzdXIgbGVzIGVycmV1cnMNCiAgICAqLw0KICAgIGNvbnN0IE5PVEVSUk9SID0gICI8c3BhbiBzdHlsZT1cImNvbG9yOnJlZFwiPk5PVCBFUlJPUjwvc3Bhbj4iOw0KICAgIGNvbnN0IEVSUk9SID0gICI8c3BhbiBzdHlsZT1cImNvbG9yOnJlZFwiPkVSUk9SPC9zcGFuPiI7DQogICAgY29uc3QgU1VDQ0VTUyA9ICAiPHNwYW4gc3R5bGU9XCJjb2xvcjpyZWRcIj5TVUNFU1M8L3NwYW4+IjsNCiAgICBjb25zdCBGQUlMVVJFID0gICI8c3BhbiBzdHlsZT1cImNvbG9yOnJlZFwiPkZBSUxVUkU8L3NwYW4+IjsNCg0KICAgICMgY29uZmlndXJhdGlvbiBkdSBqZXUgZGUgY2FyYWN0ZXJlDQogICAgcHJpdmF0ZSBzdGF0aWMgJGNoYXJzZXQgPSBudWxsOw0KDQogICAgIyBMZSBtb2RlIGRlIHJlY3VwZXJhdGlvbiBkZSBkZXMNCiAgICBwcml2YXRlIHN0YXRpYyAkbW9kZURlUmVjdXBlcmF0aW9uRGVEb25uZWUgPSBcUERPOjpGRVRDSF9PQko7DQoNCiAgICAjIE9iamVjdCBkZSBjb25uZWN0aW9uIFBETw0KICAgIHByaXZhdGUgc3RhdGljICRiZGQgPSBudWxsOw0KDQogICAgIyBGZXRjaCBNb2RlDQogICAgY29uc3QgT0JKRUNUID0gXFBETzo6RkVUQ0hfT0JKOw0KICAgIGNvbnN0IEFTU09DID0gXFBETzo6RkVUQ0hfQVNTT0M7DQogICAgY29uc3QgTlVNID0gXFBETzo6RkVUQ0hfTlVNOw0KDQogICAgIyByZXBlcnRvaXJlIHBhciBkZWZhdXQgZCd1cGxvYWQgZGUgZmljaGllcg0KICAgIHByaXZhdGUgc3RhdGljICR1cGxvYWREaXIgPSAidXBsb2FkZWQiOw0KDQogICAgIyB0YWlsbGUgZHUgZmljaGllcg0KICAgIHByaXZhdGUgc3RhdGljICRmaWxlU2l6ZSA9IDIwMDAwMDA7DQoNCiAgICAvKioNCiAgICAqIGluaXRpYWxpc2F0aW9uIGRlIGxhIGNoYWluZSBkZSBjb25uZWN0aW9uDQogICAgKiBlLmcgbXlzcWw6Ly91c2VybmFtZTpwYXNzd29yZEBob3N0bmFtZTpwb3J0L2RibmFtZQ0KICAgICovDQogICAgcHVibGljIHN0YXRpYyBmdW5jdGlvbiBpbml0KCRzZG4sICRjYiA9IG51bGwpDQogICAgew0KDQogICAgICAgIHNlbGY6OiRiZGQgPSBEb29kYjo6Y29ubmVjdGlvbigkc2RuLCAkY2IpOw0KDQogICAgICAgIGlmKHNlbGY6OiRiZGQgIT09IG51bGwpDQogICAgICAgIHsNCiAgICAgICAgICAgIA0KICAgICAgICAgICAgaWYoc2VsZjo6JGNoYXJzZXQgIT09IG51bGwpDQogICAgICAgICAgICB7DQoNCiAgICAgICAgICAgICAgICBzZWxmOjokYmRkLT5leGVjKCJTRVQgTkFNRVMgIiAuIHNlbGY6OiRjaGFyc2V0KTsNCiAgICAgICAgICAgIA0KICAgICAgICAgICAgfQ0KICAgICAgICANCiAgICAgICAgfQ0KDQogICAgfQ0KDQogICAgLyoqDQogICAgKiBzZXRDaGFyc2V0LCBwZXJtZXQgZGUgcmVpbml0aWFsaXNlciBsZSBqZXV4IGRlIGNhcmFjdGVyDQogICAgKiBAcGFyYW0gc3RydGluZzogZW5jb2RhZ2UNCiAgICAqIEByZXR1cm4gbWl4ZWQNCiAgICAqLw0KDQogICAgcHVibGljIHN0YXRpYyBmdW5jdGlvbiBzZXRDaGFyc2V0KCRjaGFyc2V0LCAkY2IgPSBudWxsKQ0KICAgIHsNCg0KICAgICAgICBpZighaW5fYXJyYXkoJGNoYXJzZXQsIFsiVVRGOCIsICJJU08tODg1OSJdKSl7DQogICAgICAgICAgICANCiAgICAgICAgICAgIGlmKCRjYiAhPT0gbnVsbCkNCiAgICAgICAgICAgIHsNCg0KICAgICAgICAgICAgICAgIHJldHVybiBjYWxsX3VzZXJfZnVuY19hcnJheSgkY2IsIFtuZXcgXEV4Y2VwdGlvbignRW5jb2RhZ2Ugbm9uIHZhbGlkZScpXSk7DQogICAgICAgICAgICAgICAgDQogICAgICAgICAgICB9DQogICAgICAgICAgICBlbHNlDQogICAgICAgICAgICB7DQoNCiAgICAgICAgICAgICAgICB0cmlnZ2VyX2Vycm9yKCJFbmNvZGFnZSBub24gdmFsaWRlIiwgRV9VU0VSX1dBUk5JTkcpOw0KICAgICAgICAgICAgICAgIGV4aXQoKTsNCg0KICAgICAgICAgICAgfQ0KICAgICAgICANCiAgICAgICAgfQ0KICAgICAgICBlbHNlDQogICAgICAgIHsNCg0KDQoNCiAgICAgICAgfQ0KDQogICAgICAgIHNlbGY6OiRjaGFyc2V0ID0gJGNoYXJzZXQ7DQoNCiAgICAgICAgaWYoJGNiICE9PSBudWxsKQ0KICAgICAgICB7DQoNCiAgICAgICAgICAgIGNhbGxfdXNlcl9mdW5jKCRjYiwgbnVsbCk7DQoNCiAgICAgICAgfQ0KDQogICAgfQ0KICAgIC8qKg0KICAgICogc2V0RmV0Y2hNb2RlLCBmb25jdGlvbiBwZXJtZXR0YW50IGRlIHJlZGVmaW5pciBsYSBtZXRob2RlIGRlIHJlY3VwZXJhdGlvbiBkZXMgaW5mb3JtYXRpb24NCiAgICAqIEBwYXJhbSBpbnQ6IFBETyBmZWN0aCBjb25zdGFudA0KICAgICovDQogICAgcHVibGljIHN0YXRpYyBmdW5jdGlvbiBzZXRGZXRjaE1vZGUoJHBkb0ZldGNoTW9kZSkNCiAgICB7DQoNCiAgICAgICAgc2VsZjo6JG1vZGVEZVJlY3VwZXJhdGlvbkRlRG9ubmVlID0gKGludCkgJHBkb0ZldGNoTW9kZTsNCg0KICAgIH0NCg0KICAgIC8qKg0KICAgICogc2VsZWN0OiBmb25jdGlvbiBwZXJtZXR0YW50IGQnZXhlY3V0ZXIgdG91dCBmb3JtZSBkZSByZXF1ZXR0ZSBkZSB0eXBlIFNFTEVDVA0KICAgICoNCiAgICAqIEBwYXJhbSBzdHJpbmcgdGFibGUgOiBsYSB0YWJsZSBzdXIgbGFxdWVsbGUgZmFpcmUgbGEgc2VsZWN0aW9uDQogICAgKiBAcGFyYW0gYXJyYXkgZmllbGRzIDogbGlzdGUgZGUgY29sb25uZSDDoCB2aXN1YWxpc2VyDQogICAgKiBAcGFyYW0gZnVuY3Rpb24gY2I6IGZvbmN0aW9uIGRlIHJlY3VwZXJhdGlvbiBkZXMgZXJyZXVycyBldCBkZXMgZG9ubmVlcw0KICAgICogQHBhcmFtIGFycmF5IFt3aGVyZSA9IG51bGxdOiBjb25kaXRpb24gc3VwcGxlbWVudGFpcmUNCiAgICAqIEBwYXJhbSBib29sZWFuIG9yZGVyOiBPUkRFUiBCWQ0KICAgICogQHBhcmFtIHN0cmluZyBsaW1pdA0KICAgICovDQoNCiAgICBwdWJsaWMgc3RhdGljIGZ1bmN0aW9uIHNlbGVjdCgkdGFibGUsICRmaWVsZHMsICRjYiwgJHdoZXJlID0gbnVsbCwgJG9yZGVyID0gZmFsc2UsICRsaW1pdCA9IG51bGwpDQogICAgew0KDQoNCiAgICAgICAgLyoqDQogICAgICAgICogVXRpbGlzYXRpb24gZ2xvYmFsIGRlIGxhIHZhcmlhYmxlICRiZGQNCiAgICAgICAgKi8NCiAgICAgICAgIyBVbmUgY2hhaW5lIGNvbnRlbmFudCB1biBsaXN0ZSBkZSBjb2xvbm5lIGRlcyBlbGVtZW50cyBlbiB2aXN1YWxpc2VyDQogICAgICAgICRmaWVsZHMgPSBpbXBsb2RlKCIsICIsICRmaWVsZHMpOw0KDQogICAgICAgICMgU3RhdGVtZW50IHBhciBkZWZhdXQNCiAgICAgICAgJHF1ZXJ5ID0gIlNFTEVDVCAiIC4gJGZpZWxkcyAuICIgRlJPTSAiIC4gJHRhYmxlOw0KDQoNCiAgICAgICAgIyBDb25zdHJ1Y3Rpb24gZCd1biBTUUwgc3RhdGVtZW50IHBlcnNvbm5hbGlzYWJsZQ0KICAgICAgICBpZigkd2hlcmUgIT09IG51bGwgJiYgaXNfYXJyYXkoJHdoZXJlKSkNCiAgICAgICAgew0KICAgICAgICAgICAgDQogICAgICAgICAgICAkYyA9IGNvdW50KCR3aGVyZSk7DQoNCiAgICAgICAgICAgIGlmKCRjID09IDEpDQogICAgICAgICAgICB7DQoNCiAgICAgICAgICAgICAgICAkcXVlcnkgLj0gIiBXSEVSRSAiIC4gaW1wbG9kZSgiLCIsICR3aGVyZSk7DQoNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIGVsc2UgaWYoJGMgPT0gMikNCiAgICAgICAgICAgIHsNCg0KICAgICAgICAgICAgICAgIGlmKGlzX2FycmF5KCRvcmRlcikgJiYgY291bnQoJG9yZGVyKSA9PSAyKQ0KICAgICAgICAgICAgICAgIHsNCiAgICAgICAgICAgICAgICAgICAgDQogICAgICAgICAgICAgICAgICAgIHRyaWdnZXJfZXJyb3IoIlN5bnRheCBlcnJvciwgbGUgcGFyYW1ldHJlIGFwcmVzIGxhIGZvbmN0aW9uIGVzdCB1biB3aGVyZSBkZSAiLCBFX1dBUk5JTkcpOw0KICAgICAgICAgICAgICAgICAgICBleGl0KCk7DQoNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgZWxzZSBpZihpc19zdHJpbmcoJG9yZGVyKSkNCiAgICAgICAgICAgICAgICB7DQogICAgICAgICAgICAgICAgICAgICRsaW1pdCA9ICRvcmRlcjsNCiAgICAgICAgICAgICAgICB9DQoNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIGVsc2UNCiAgICAgICAgICAgIHsNCiAgICAgICAgICAgICAgICBpZihpc19zdHJpbmcoJG9yZGVyKSkNCiAgICAgICAgICAgICAgICB7DQoNCiAgICAgICAgICAgICAgICAgICAgJGxpbWl0ID0gJG9yZGVyOw0KICAgICAgICAgICAgICAgICAgICAkb3JkZXIgPSAkd2hlcmU7DQoNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICB9DQoNCiAgICAgICAgfQ0KICAgICAgICBlbHNlaWYoaXNfc3RyaW5nKCR3aGVyZSkpDQogICAgICAgIHsNCg0KICAgICAgICAgICAgJGxpbWl0ID0gJHdoZXJlOw0KDQogICAgICAgIH0NCg0KICAgICAgICBpZihpc19hcnJheSgkb3JkZXIpICYmIGNvdW50KCRvcmRlcikgPT0gMikNCiAgICAgICAgew0KDQogICAgICAgICAgICBpZihlbmQoJG9yZGVyKSA9PT0gdHJ1ZSkNCiAgICAgICAgICAgIHsNCg0KICAgICAgICAgICAgICAgICRxdWVyeSAuPSAiIE9SREVSIEJZICIgLiAkb3JkZXJbMF0gLiAiIERFU0MiOw0KDQogICAgICAgICAgICB9DQogICAgICAgICAgICBlbHNlDQogICAgICAgICAgICB7DQogICAgICAgIA0KICAgICAgICAgICAgICAgICRxdWVyeSAuPSAiIE9SREVSIEJZICIgLiAkb3JkZXJbMF0gLiAiIEFTQyI7DQogICAgICAgIA0KICAgICAgICAgICAgfQ0KDQogICAgICAgIH0NCiAgICAgICAgZWxzZWlmKGlzX3N0cmluZygkb3JkZXIpKQ0KICAgICAgICB7DQogICAgICAgIA0KICAgICAgICAgICAgJGxpbWl0ID0gJG9yZGVyOw0KICAgICAgICANCiAgICAgICAgfQ0KDQogICAgICAgIGlmKCRsaW1pdCAhPT0gbnVsbCkNCiAgICAgICAgew0KICAgICAgICANCiAgICAgICAgICAgICRxdWVyeSAuPSAiIExJTUlUICIgLiAkbGltaXQ7DQogICAgICAgIA0KICAgICAgICB9DQoNCiAgICAgICAgaWYoc2VsZjo6JGNoYXJzZXQgIT09IG51bGwpDQogICAgICAgIHsNCiAgICAgICAgDQogICAgICAgICAgICBzZWxmOjokYmRkLT5leGVjKCJTRVQgTkFNRVMgIiAuIHNlbGY6OiRjaGFyc2V0KTsNCiAgICAgICAgDQogICAgICAgIH0NCg0KICAgICAgICAkcmVxID0gc2VsZjo6JGJkZC0+cXVlcnkoJHF1ZXJ5KTsNCg0KDQogICAgICAgICRlcnIgPSBzZWxmOjpnZXRFcnJvcihzZWxmOjokYmRkLT5lcnJvckluZm8oKSwgJHF1ZXJ5KTsNCg0KICAgICAgICBpZihpc19ib29sKCRyZXEpKQ0KICAgICAgICB7DQoNCiAgICAgICAgICAgICRjYigkZXJyLCBbXSk7DQoNCiAgICAgICAgfWVsc2UNCiAgICAgICAgew0KDQogICAgICAgICAgICAkY2IoJGVyciwgJHJlcS0+ZmV0Y2hBbGwoc2VsZjo6JG1vZGVEZVJlY3VwZXJhdGlvbkRlRG9ubmVlKSk7DQoNCiAgICAgICAgfQ0KDQogICAgfQ0KDQogICAgLyoqDQogICAgKiB1cGRhdGU6IGZvbmN0aW9uIHBlcm1ldHRhbnQgZCdleGVjdXRlciB0b3V0IGZvcm1lIGRlIHJlcXVldHRlIGRlIHR5cGUgVVBEQVRFDQogICAgKiBAcGFyYW0gc3RyaW5nIHRhYmxlOiBsYSB0YWJsZSBzdXIgbGFxdWVsbGUgZmFpcmUgbGEgc2VsZWN0aW9uDQogICAgKiBAcGFyYW0gYXJyYXkgZmllbGRzOiBsaXN0ZSBkZSBjb2xvbm5lIMOgIG1ldHRyZSBhIGpvdXINCiAgICAqIEBwYXJhbSBmdW5jdGlvbiBjYjogZm9uY3Rpb24gZGUgcmVjdXBlcmF0aW9uIGRlcyBlcnJldXJzIGV0IGRlcyBkb25uZWVzDQogICAgKiBAcGFyYW0gc3RyaW5nIHdoZXJlOiB3aGVyZSBjb25kaXRpb24NCiAgICAqLw0KDQogICAgcHVibGljIHN0YXRpYyBmdW5jdGlvbiB1cGRhdGUoJHRhYmxlLCAkZmllbGRzLCAkd2hlcmUsICRjYikNCiAgICB7DQoNCiAgICAgICAgJHF1ZXJ5ID0gIlVQREFURSAiIC4gJHRhYmxlIC4gIiBTRVQgIiAuIGltcGxvZGUoIiwgIiwgJGZpZWxkcykgLiAiIFdIRVJFICIgLiAkd2hlcmU7DQoNCiAgICAgICAgc2VsZjo6JGJkZC0+ZXhlYygkcXVlcnkpOw0KDQogICAgICAgICRjYihzZWxmOjpnZXRFcnJvcihzZWxmOjokYmRkLT5lcnJvckluZm8oKSwgJHF1ZXJ5KSk7DQoNCiAgICB9DQoNCiAgICAvKioNCiAgICAqIGluc2VydDogZm9uY3Rpb24gcGVybWV0dGFudCBkJ2V4ZWN1dGVyIHRvdXQgZm9ybWUgZGUgcmVxdWV0dGUgZGUgdHlwZSBJTlNFUlQNCiAgICAqIEBwYXJhbSBzdHJpbmcgdGFibGUgOiBsYSB0YWJsZSBzdXIgbGFxdWVsbGUgZmFpcmUgbGEgc2VsZWN0aW9uDQogICAgKiBAcGFyYW0gYXJyYXkgZmllbGRzOiBsaXN0ZSBkZSBjb2xvbm5lIMOgIGluc2VyZXINCiAgICAqIEBwYXJhbSBmdW5jdGlvbiBjYjogZm9uY3Rpb24gZGUgcmVjdXBlcmF0aW9uIGRlcyBlcnJldXJzIGV0IGRlcyBkb25uZWVzDQogICAgKi8NCg0KICAgIHB1YmxpYyBzdGF0aWMgZnVuY3Rpb24gaW5zZXJ0KCR0YWJsZSwgJGZpZWxkcywgJGNiKQ0KICAgIHsNCg0KICAgICAgICAkcXVlcnkgPSAiSU5TRVJUIElOVE8geyR0YWJsZX0gU0VUICI7DQoNCiAgICAgICAgJGkgPSAwOw0KDQogICAgICAgIGZvcmVhY2ggKCRmaWVsZHMgYXMgJGtleSA9PiAkdmFsdWUpDQogICAgICAgIHsNCg0KICAgICAgICAgICAgJHF1ZXJ5IC49ICRpID4gMCA/ICIsICIgOiAiIjsNCiAgICAgICAgICAgICRxdWVyeSAuPSAgInska2V5fSA9IDp7JGtleX0iOw0KICAgICAgICAgICAgJGkrKzsNCg0KICAgICAgICB9DQoNCiAgICAgICAgJHJlcSA9IHNlbGY6OiRiZGQtPnByZXBhcmUoJHF1ZXJ5KTsNCg0KICAgICAgICBmb3JlYWNoKCRmaWVsZHMgYXMgJGtleSA9PiAkdmFsdWUpDQogICAgICAgIHsNCg0KICAgICAgICAgICAgJHJlcS0+YmluZFZhbHVlKCJ7JGtleX0iLCAkdmFsdWUsIGlzX2ludCgkdmFsdWUpID8gXFBETzo6UEFSQU1fSU5UIDogXFBETzo6UEFSQU1fU1RSKTsNCg0KICAgICAgICB9DQoNCiAgICAgICAgJHJlcS0+ZXhlY3V0ZSgpOw0KDQogICAgICAgICRjYihzZWxmOjpnZXRFcnJvcihzZWxmOjokYmRkLT5lcnJvckluZm8oKSwgJHF1ZXJ5KSk7DQoNCiAgICB9DQoNCg0KICAgIC8qKg0KICAgICogZGVsZXRlOiBmb25jdGlvbiBwZXJtZXR0YW50IGQnZXhlY3V0ZXIgdG91dCBmb3JtZSBkZSByZXF1ZXR0ZSBkZSB0eXBlIERFTEVURQ0KICAgICogQHBhcmFtIHN0cmluZyB0YWJsZQ0KICAgICogQHBhcmFtIGFycmF5IHdoZXJlOiBpZCBkZXMgY29sb25uZXMgw6Agc3VwcHJpbWVyDQogICAgKiBAcGFyYW0gZnVuY3Rpb24gY2I6IGZvbmN0aW9uIGRlIHJlY3VwZXJhdGlvbiBkZXMgZXJyZXVycyBldCBkZXMgZG9ubmVlcw0KICAgICovDQoNCiAgICBwdWJsaWMgc3RhdGljIGZ1bmN0aW9uIGRlbGV0ZSgkdGFibGUsICR3aGVyZSwgJGNiID0gbnVsbCkNCiAgICB7DQoNCiAgICAgICAgJHF1ZXJ5ID0gIkRFTEVURSBGUk9NICIgLiAkdGFibGUgLiAiIFdIRVJFIGlkID0gOmlkIjsNCg0KICAgICAgICAkcmVxID0gc2VsZjo6JGJkZC0+cHJlcGFyZSgkcXVlcnkpOw0KDQogICAgICAgICRyZXEtPmJpbmRWYWx1ZSgiOmlkIiwgJHdoZXJlWyJpZCJdLCBcUERPOjpQQVJBTV9JTlQpOw0KDQogICAgICAgICRyZXEtPmV4ZWN1dGUoKTsNCiAgICAgICAgaWYoJGNiICE9PSBudWxsKQ0KICAgICAgICB7DQogICAgICAgICAgICBjYWxsX3VzZXJfZnVuYygkY2IsIFtzZWxmOjpnZXRFcnJvcihzZWxmOjokYmRkLT5lcnJvckluZm8oKSwgJHF1ZXJ5KV0pOw0KICAgICAgICB9DQoNCiAgICB9DQoNCiAgICAvKioNCiAgICAqIHVwbG9hZEZpbGUsIGZvbmN0aW9uIHBlcm1ldHRhbnQgZCd1cGxvYWRlZCB1biBmaWNoaWVyLg0KICAgICoNCiAgICAqIEBwYXJhbSBhcnJheSwgdW4gdGFibGVhdSBjb21wb3J0YW50IGxlcyBpbmZvcmFtdGlvIHN1ciBsZSBmaWNoaWVyIGEgdXBsb2FkZXIgcHJvdmVuYW50IGRlIGxhIHZhcmlhYmxlICRfRklMRVMuDQogICAgKiBAcGFyYW0gYXJyYXksIGxpc3RlIGRlcyBleHRlbnNpb25zIHZhbGlkZXMuDQogICAgKiBAcGFyYW0gc3RyaW5nWyR1cGxvYWRlZERpcmVjdG9yeSA9IG51bGxdLCBjaGVtaW4gZHUgcmVwcmV0b2lyZSBkYW5zIGxlcXVlbGxlIGxlIGZpY2hpZXIgdG9pIGV0cmUgdXBsb2FkZXIuDQogICAgKiBAcGFyYW0gZm9uY3Rpb25bJGNiID0gbnVsbF0sIGZvbmN0aW9uIGRlIHJhcHBlbCBwb3VyIHJlY3VwZXJlciBsZXMgZXJyZXVycy4NCiAgICAqLw0KDQogICAgcHVibGljIHN0YXRpYyBmdW5jdGlvbiB1cGxvYWRGaWxlKCRmaWxlLCBhcnJheSAkZXh0ZW5zaW9uLCAkY2IgPSBudWxsLCAkaGFzaCA9IG51bGwpDQogICAgew0KDQogICAgICAgIGlmKGlzX2FycmF5KCRleHRlbnNpb24pKQ0KICAgICAgICB7DQoNCiAgICAgICAgICAgICRleHRlbnNpb25WYWxpZGUgPSAkZXh0ZW5zaW9uOw0KDQogICAgICAgIH0NCiAgICAgICAgZWxzZQ0KICAgICAgICB7DQoNCiAgICAgICAgICAgICRjYiA9ICRleHRlbnNpb247DQoNCiAgICAgICAgfQ0KDQogICAgICAgICMgU2kgbGUgZmljaGllciBlc3QgYmllbiBkYW5zIGxlIHJlcGVydG9pciB0bXAgZGUgUEhQDQogICAgICAgIGlmKGlzX3VwbG9hZGVkX2ZpbGUoJGZpbGVbInRtcF9uYW1lIl0pKQ0KICAgICAgICB7DQoNCiAgICAgICAgICAgIGlmKCFpc19kaXIoc2VsZjo6JHVwbG9hZERpcikpDQogICAgICAgICAgICB7DQoNCiAgICAgICAgICAgICAgICBta2RpcihzZWxmOjokdXBsb2FkRGlyLCAwNzc3KTsNCg0KICAgICAgICAgICAgfQ0KDQogICAgICAgICAgICAjIFNpIGxlIGZpY2hpZXIgZXN0IGJpZW4gdXBsb2FkZXIsIGF2ZWMgYXVjdW5lIGVycm9yDQogICAgICAgICAgICBpZigkZmlsZVsiZXJyb3IiXSA9PT0gMCkNCiAgICAgICAgICAgIHsNCg0KICAgICAgICAgICAgICAgIGlmKCRmaWxlWyJzaXplIl0gPD0gc2VsZjo6JGZpbGVTaXplKQ0KICAgICAgICAgICAgICAgIHsNCg0KICAgICAgICAgICAgICAgICAgICAkcGF0aEluZm8gPSAob2JqZWN0KSBwYXRoaW5mbygkZmlsZVsibmFtZSJdKTsNCg0KICAgICAgICAgICAgICAgICAgICBpZihpbl9hcnJheSgkcGF0aEluZm8tPmV4dGVuc2lvbiwgJGV4dGVuc2lvblZhbGlkZSkpDQogICAgICAgICAgICAgICAgICAgIHsNCg0KICAgICAgICAgICAgICAgICAgICAgICAgaWYoJGhhc2ggIT09IG51bGwpDQogICAgICAgICAgICAgICAgICAgICAgICB7DQogICAgICAgICAgICAgICAgICAgICAgICANCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkZmlsZW5hbWUgPSBoYXNoKCRoYXNoLCB1bmlxaWQocmFuZChudWxsLCB0cnVlKSkpOw0KICAgICAgICAgICAgICAgICAgICAgICAgDQogICAgICAgICAgICAgICAgICAgICAgICB9ZWxzZQ0KICAgICAgICAgICAgICAgICAgICAgICAgew0KDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgJGZpbGVuYW1lID0gJHBhdGhJbmZvLT5maWxlbmFtZTsNCiAgICAgICAgICAgICAgICAgICAgICAgIA0KICAgICAgICAgICAgICAgICAgICAgICAgfQ0KDQogICAgICAgICAgICAgICAgICAgICAgICAkZXh0ID0gJHBhdGhJbmZvLT5leHRlbnNpb247DQoNCiAgICAgICAgICAgICAgICAgICAgICAgIG1vdmVfdXBsb2FkZWRfZmlsZSgkZmlsZVsidG1wX25hbWUiXSwgc2VsZjo6JHVwbG9hZERpciAuICIvIiAuICRmaWxlbmFtZSAuICcuJyAuICRleHQpOw0KDQogICAgICAgICAgICAgICAgICAgICAgICAjIFN0YXR1cywgZmljaGllciB1cGxvYWTDqQ0KICAgICAgICAgICAgICAgICAgICAgICAgJHN0YXR1cyA9IFsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAic3RhdHVzIiA9PiBzZWxmOjpTVUNDRVNTLA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICJtZXNzYWdlIiA9PiBzZWxmOjpzdXJyb3VuZCgnRmlsZSBVcGxvYWRlZC4nLCAnIzZERDM3QycpDQogICAgICAgICAgICAgICAgICAgICAgICBdOw0KDQogICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgZWxzZQ0KICAgICAgICAgICAgICAgICAgICB7DQoNCiAgICAgICAgICAgICAgICAgICAgICAgICMgU3RhdHVzLCBleHRlbnNpb24gZHUgZmljaGllcg0KICAgICAgICAgICAgICAgICAgICAgICAgJHN0YXR1cyA9IFsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAnc3RhdHVzJyA9PiBzZWxmOjpGQUlMVVJFLA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICdtZXNzYWdlJyA9PiBzZWxmOjpzdXJyb3VuZChzZWxmOjpGQUlMVVJFIC4gJzogQXZhaWxhYmUgRmlsZSwgdmVyaWZ5IGZpbGUgdHlwZS4nLCAnI0UxMzcxQScpDQogICAgICAgICAgICAgICAgICAgICAgICBdOw0KDQogICAgICAgICAgICAgICAgICAgIH0NCg0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICBlbHNlDQogICAgICAgICAgICAgICAgew0KDQogICAgICAgICAgICAgICAgICAgICMgU3RhdHVzLCBsYSB0YWlsbGUgZXN0IGludmFsaWRlDQogICAgICAgICAgICAgICAgICAgICRzdGF0dXMgPSBbDQogICAgICAgICAgICAgICAgICAgICAgICAnc3RhdHVzJyA9PiBzZWxmOjpGQUlMVVJFLA0KICAgICAgICAgICAgICAgICAgICAgICAgJ21lc3NhZ2UnID0+IHNlbGY6OnN1cnJvdW5kKCdGaWxlIGlzIG1vcmUgYmlnLCBtYXggc2l6ZSAnIC4gc2VsZjo6JGZpbGVTaXplLiAnIG9jdGV0cy4nLCAnI0UxMzcxQScpDQogICAgICAgICAgICAgICAgICAgIF07DQoNCiAgICAgICAgICAgICAgICB9DQoNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIGVsc2UNCiAgICAgICAgICAgIHsNCg0KICAgICAgICAgICAgICAgICMgU3RhdHVzLCBmaWNoaWVyIGVycm9uw6kuDQogICAgICAgICAgICAgICAgJHN0YXR1cyA9IFsNCiAgICAgICAgICAgICAgICAgICAgInN0YXR1cyIgPT4gc2VsZjo6RkFJTFVSRSwNCiAgICAgICAgICAgICAgICAgICAgIm1lc3NhZ2UiID0+IHNlbGY6OnN1cnJvdW5kKCdMZSBmaWNoaWVyIHBvc3PDqGRlIGRlcyBlcnJldXJzLicsICIjRTEzNzFBIikNCiAgICAgICAgICAgICAgICBdOw0KDQogICAgICAgICAgICB9DQoNCiAgICAgICAgfQ0KICAgICAgICBlbHNlDQogICAgICAgIHsNCg0KICAgICAgICAgICAgIyBTdGF0dXMsIGZpY2hpZXIgbm9uIHVwbG9hZMOpIA0KICAgICAgICAgICAgJHN0YXR1cyA9IFsNCiAgICAgICAgICAgICAgICAic3RhdHVzIiA9PiBzZWxmOjpGQUlMVVJFLA0KICAgICAgICAgICAgICAgICJtZXNzYWdlIiA9PiBzZWxmOjpGQUlMVVJFIC4gJyA6IExlIGZpY2hpZXIgblwnYSBwYXMgcHVzIMOqdHJlIHVwbG9hZGVyLicNCiAgICAgICAgICAgIF07DQoNCiAgICAgICAgfQ0KDQogICAgICAgIGlmKCRjYiAhPT0gbnVsbCkNCiAgICAgICAgew0KICAgICAgICANCiAgICAgICAgICAgIGNhbGxfdXNlcl9mdW5jX2FycmF5KCRjYiwgWyhvYmplY3QpICRzdGF0dXMsIGlzc2V0KCRmaWxlbmFtZSkgPyAkZmlsZW5hbWUgOiBudWxsLCBpc3NldCgkZXh0KSA/ICRleHQgOiBudWxsXSk7DQogICAgICAgIA0KICAgICAgICB9DQoNCiAgICB9DQoNCiAgICAvKioNCiAgICAqIHNldFVwbG9hZGVkRGlyLCBmb25jdGlvbiBwZXJtZXR0YW50IGRlIHJlZGVmaW5pciBsZSByZXBlcnRvaXIgZCd1cGxvYWQNCiAgICAqIEBwYXJhbSBzdHJpbmc6cGF0aCwgbGUgY2hlbWluIGR1IGRvc3NpZXIgZGUgbCd1cGxvYWQNCiAgICAqLw0KICAgIHB1YmxpYyBzdGF0aWMgZnVuY3Rpb24gc2V0VXBsb2FkZWREaXIoJHBhdGgpDQogICAgew0KICAgICAgICANCiAgICAgICAgaWYoaXNfc3RyaW5nKCRwYXRoKSkNCiAgICAgICAgew0KICAgICAgICANCiAgICAgICAgICAgIHNlbGY6OiR1cGxvYWREaXIgPSAkcGF0aDsNCiAgICAgICAgDQogICAgICAgIH1lbHNlDQogICAgICAgIHsNCiAgICAgICAgDQogICAgICAgICAgICB0cmlnZ2VyX2Vycm9yKCJTVlAsIHVuZSBjaGFpbmUgZGUgY2FyYWN0ZXIgZXN0IGRlbWFuZGVyLiIsIEVfV0FSTklORyk7DQogICAgICAgICAgICBleGl0KCk7DQogICAgICAgIA0KICAgICAgICB9DQoNCiAgICB9DQoNCiAgICAvKioNCiAgICAqIGdldEVycm9yIGVzdCB1bmUgZm9uY3Rpb24gcGVybWV0YW50IGRlIGZvcm1hdGVyIGRlcyBlcnJldXJzLCBldCBub3VzIGxlcyBlbnZveWVzDQogICAgKg0KICAgICogQHBhcmFtIGFycmF5LCBsaXN0ZSBkZXMgZXJyZXVycyBnZW5lcmVyIHBhcyBQRE9FeGNlcHRpb24NCiAgICAqIEBwYXJhbSBzdHJpbmcsIGxhIHJlcXVldGUgc3VyIGxhcXVlbGxlIGlsIHkgYSBldSBsJ2VycmV1cg0KICAgICogQHJldHVybiBvYmplY3QsIHVuIG9iamV0IGNvbnRlbmFudCBsZXMgaW5mb3JtYXRpb25zIGZvcm1hdGVzIGRlIGwnZXJyZXVyDQogICAgKi8NCiAgICBwcml2YXRlIHN0YXRpYyBmdW5jdGlvbiBnZXRFcnJvcigkZXJyLCAkcXVlcnkpDQogICAgew0KDQogICAgICAgIHJldHVybiAob2JqZWN0KSBbDQogICAgICAgICAgICAiZXJyb3IiID0+ICRlcnJbMl0gIT09IG51bGwgPyB0cnVlOiBmYWxzZSwNCiAgICAgICAgICAgICJxdWVyeSIgPT4gJHF1ZXJ5LA0KICAgICAgICAgICAgImVycm9ySW5mbyIgPT4gJGVyclsyXSAhPT0gbnVsbCA/IHNlbGY6OkVSUk9SIC4iOiAiLiBzdHJfcmVwbGFjZSgiJyAiLCAiICIsIHByZWdfcmVwbGFjZSgiIydbYS16QS1aXy1dK1wuIyIsICIiLCAkZXJyWzJdKSkgOiBzZWxmOjpOT1RFUlJPUg0KICAgICAgICBdOw0KDQogICAgfQ0KDQogICAgLyoqDQogICAgKiBzdXJyb3VuZCwgZm9uY3Rpb24gcGVybWV0dGFudCBkZSBmb3JtYXRlciBlbiBIVE1MIHVuIG1lc3NhZ2UgZCdlcnJvcg0KICAgICoNCiAgICAqIEBwYXJhbSBzdHJpbmcsIG1lc3NhZ2UuDQogICAgKiBAcGFyYW0gc3RyaW5nLCBjb2xvcg0KICAgICogQHJldHVybiBzdHJpbmcsIG1lc3NhZ2UgZm9ybWF0ZXINCiAgICAqLw0KICAgIHByaXZhdGUgc3RhdGljIGZ1bmN0aW9uIHN1cnJvdW5kKCRtZXNzYWdlLCAkY29sb3IpDQogICAgew0KDQogICAgICAgIHJldHVybiAnPHNwYW4gc3R5bGU9ImNvbG9yOicgLiAkY29sb3IgLiAnIj4nIC4gJG1lc3NhZ2UgLiAnPC9zcGFuPic7DQoNCiAgICB9DQoNCiAgICAvKioNCiAgICAqIHNldEZpbGVTaXplLCBmb25jdGlvbiBwZXJtZXR0YW50IGRlIG1vZGlmZXIgbGEgdGFpbGxlIGRlcyBmaWNoaWVycyBhIHVwbG9hZGVyDQogICAgKg0KICAgICogQHBhcmFtIGludCwgbm91dmVsbGUgdGFpbGxlIGRlcyBmaWNoaWVyIGEgdXBsb2FkZXINCiAgICAqLw0KICAgIHB1YmxpYyBzdGF0aWMgZnVuY3Rpb24gc2V0RmlsZVNpemUoJGZpbGVTaXplKQ0KICAgIHsNCg0KICAgICAgICBzZWxmOjokZmlsZVNpemUgPSAoaW50KSAkZmlsZVNpemU7DQoNCiAgICB9DQoNCiAgICAjIEZpY2hpZXIsIGNvbnRlbmFudCB1biBjb2RlIHNpbXBsZSBlbiBwaHAsIG5vdXMgcGVybWV0dGFudCBkJ2V4ZWN1dGVyIGRlIHJlcXVldGUgU1FMLg0KfQ0K
EOPAGE;

$doodb = <<< EOPGAE
PD9waHANCg0KLyoqDQoqIFBIUCwgdW5lIGNsYXNzZSBQSFAgc2ltcGxlLiBEYW5zIGxlIGJ1dCBzaW1wbGlmacOpIGwndXRpbGlzYXRpb24gZGUgUERPDQoqIEBhdXRob3IgRGFraWEgRnJhbmNrIDxkYWtpYWZyYW5ja2luZm9AZ21haWwuY29tPg0KKiBAcGFja2FnZSBEb287DQoqIEB2ZXJzaW9uIDAuMS4wDQoqLw0KDQpuYW1lc3BhY2UgRG9vOw0KDQpjbGFzcyBEb29kYiB7DQoNCiAgICAvKioNCiAgICAqIGNyZWF0aW9uIGQndW4gY29ubmVjdGlvbiBQRE8NCiAgICAqDQogICAgKiBAcGFyYW0gYXJyYXkNCiAgICAqIEBwYXJhbSBjYWxsYmFjayBmdW5jdGlvbg0KICAgICogQHJldHVybiBQRE8gfHwgTlVMTA0KICAgICogZS5nIG15c3FsOi8vdXNlcm5hbWU6cGFzc3dvcmRAaG9zdG5hbWU6cG9ydC9kYm5hbWUNCiAgICAqLw0KDQogICAgcHVibGljIHN0YXRpYyBmdW5jdGlvbiBjb25uZWN0aW9uKCRzZG4sICRjYiA9IG51bGwpew0KDQogICAgICAgICR0bXAgPSBleHBsb2RlKCIvIiwgJHNkbik7DQoNCiAgICAgICAgJGNvbmZpZyA9IGV4cGxvZGUoIkAiLCAkdG1wWzJdKTsNCiAgICAgICAgJHVzZXJDb25maWcgPSBleHBsb2RlKCI6IiwgJGNvbmZpZ1swXSk7DQogICAgICAgICRob3N0Q29uZmlnID0gZXhwbG9kZSgiOiIsICRjb25maWdbMV0pOw0KDQogICAgICAgICRob3N0ID0gJGhvc3RDb25maWdbMF07DQogICAgICAgICRwb3J0ID0gaXNzZXQoJGhvc3RDb25maWdbMV0pID8gJGhvc3RDb25maWdbMV0gOiAnJzsNCg0KICAgICAgICAkdXNlciA9ICR1c2VyQ29uZmlnWzBdOw0KICAgICAgICAkcGFzc3dvcmQgPSBpc3NldCgkdXNlckNvbmZpZ1sxXSkgPyAkdXNlckNvbmZpZ1sxXSA6ICcnOw0KDQogICAgICAgICRkYm5hbWUgPSAkdG1wWzNdOw0KICAgICAgICAkZW5naW5lID0gJHRtcFswXTsNCg0KDQogICAgICAgICMgY3JlYXRlIGRlIGwnYXBlcmN1IGV4dGVybmUuDQogICAgICAgICRjb25uZWN0aW9uRGF0YSA9IFsNCiAgICAgICAgICAgICJlbmdpbmUiID0+ICRlbmdpbmUsDQogICAgICAgICAgICAiaG9zdCIgPT4gJGhvc3QsDQogICAgICAgICAgICAicG9ydCIgPT4gJHBvcnQsDQogICAgICAgICAgICAidXNlciIgPT4gJHVzZXIsDQogICAgICAgICAgICAicGFzc3dvcmQiID0+ICRwYXNzd29yZCwNCiAgICAgICAgICAgICJkYm5hbWUiID0+ICRkYm5hbWUNCiAgICAgICAgXTsNCg0KICAgICAgICB0cnl7DQoNCiAgICAgICAgICAgICMgSW5zdGFudGlhdGlvbiBkZSBsYSBjb25uZWN0aW9uIHZpYSBsZSBkcml2ZXIgUERPDQogICAgICAgICAgICAkYmRkID0gbmV3IFxQRE8oInskZW5naW5lfTpob3N0PXskaG9zdH07ZGJuYW1lPXskZGJuYW1lfSIsICJ7JHVzZXJ9IiwgInskcGFzc3dvcmR9Iik7DQoNCiAgICAgICAgfWNhdGNoKFxFeGNlcHRpb24gJGUpew0KICAgICAgICAgICAgIyBnZXN0aW9uIGQnZXhjZXB0aW9uIHN1ciBsYSBjaGFpbmUgZGUgY29ubmVjdGlvbiBQRE8NCg0KICAgICAgICAgICAgaWYoJGNiICE9PSBudWxsKQ0KICAgICAgICAgICAgew0KICAgICAgICAgICAgICAgICMgaXMgZWxsZSBuJ2VzdCBwYXMgbnVsbCwgZXhlY3V0aW9uIGRlIGxhIGZvbmN0aW9uIGRlIHJhcHBlbA0KICAgICAgICAgICAgICAgIGNhbGxfdXNlcl9mdW5jX2FycmF5KCRjYiwgWyRlLCAkY29ubmVjdGlvbkRhdGFdKTsNCiAgICAgICAgICAgIH0NCg0KICAgICAgICAgICAgcmV0dXJuIG51bGw7DQoNCiAgICAgICAgfQ0KDQogICAgICAgIGlmKCRjYiAhPT0gbnVsbCkNCiAgICAgICAgew0KICAgICAgICAgICAgIyBpcyBlbGxlIG4nZXN0IHBhcyBudWxsLCBleGVjdXRpb24gZGUgbGEgZm9uY3Rpb24gZGUgcmFwcGVsDQogICAgICAgICAgICBjYWxsX3VzZXJfZnVuY19hcnJheSgkY2IsIFtudWxsLCAkY29ubmVjdGlvbkRhdGFdKTsNCiAgICAgICAgfQ0KDQogICAgICAgICMgUmV0b3VyIGRlIGwnb2JqZXQgUERPDQogICAgICAgIHJldHVybiAkYmRkOw0KDQogICAgfQ0KDQp9DQo=
EOPGAE;

$doodata = <<< EOPAGE
PD9waHANCg0KLyoqDQoqIFBIUCwgdW5lIGNsYXNzZSBQSFAgc2ltcGxlLiBEYW5zIGxlIGJ1dCBzaW1wbGlmacOpIGwndXRpbGlzYXRpb24gZGUgUERPDQoqIEBhdXRob3IgRGFraWEgRnJhbmNrIDxkYWtpYWZyYW5ja2luZm9AZ21haWwuY29tPg0KKiBAcGFja2FnZSBEb287DQoqIEB2ZXJzaW9uIDAuMS4wDQoqLw0KDQpuYW1lc3BhY2UgRG9vOw0KDQovKioNCiogRG9vZGF0YSwgY2xhc3MgRG9vIHBlcm1ldHRhbnQgZGUgY3J5cHRlciBldCBkZWNyaXB0ZXIgZGUgZG9ubmVlDQoqLw0KY2xhc3MgRG9vZGF0YQ0Kew0KDQoJcHJpdmF0ZSBzdGF0aWMgJHBhcnQgPSAiXDBcMFwwXDBcMFwwXDBcMFwwXDBcMFwwXDBcMFwwXDAiOw0KCXB1YmxpYyBzdGF0aWMgJG1vZGUgPSBNQ1JZUFRfTU9ERV9DQkM7DQoJcHVibGljIHN0YXRpYyAka2V5ID0gJ2UxMDQ4MWRkZDAyYWNmMzY2ZjU3YzYwODE5ODc3YTMyJzsNCglwcml2YXRlIHN0YXRpYyAkZGF0YUxlbiAgPSBudWxsOw0KDQoJLyoqDQoJKiBkZWNyeXB0bywgZm9uY3Rpb24gcGVybWV0dGFudCBkZSBkZWNyeXB0ZXIgdW5lIGNoYWluZSBkZSBjYXJhY3RlcmUgZW5jcnlwdGVyIGF2ZWMgbGEgZm9uY3Rpb24gc29ldXIuDQogICAgKg0KCSogQHBhcmFtIHN0cmluZywgZG9ubmVlIGEgZGVjcnlwdGVyLg0KCSogQHBhcmFtIGZ1bmN0aW9uLCB1bmUgZm9uY3Rpb24gZGUgY2FsbGJhY2suDQoJKiBAcmV0dXJuIHN0cmluZywgcmVzdWx0YXQNCgkqLw0KDQoJcHVibGljIHN0YXRpYyBmdW5jdGlvbiBkZWNyeXB0bygkZGF0YSwgJGNiID0gbnVsbCkNCgl7DQoNCgkJJGRlY29kZSA9IGJhc2U2NF9kZWNvZGUoJGRhdGEpOw0KCQkkciA9IG1jcnlwdF9kZWNyeXB0KE1DUllQVF9SSUpOREFFTF8xMjgsIHNlbGY6OiRrZXksICRkZWNvZGUsIHNlbGY6OiRtb2RlLCBzZWxmOjokcGFydCk7DQoNCgkJaWYoJGNiICE9PSBudWxsKQ0KCQl7DQoJCQljYWxsX3VzZXJfZnVuYygkY2IsIChzdWJzdHIoJHIsIDAsIHNlbGY6OiRkYXRhTGVuKSkpOw0KCQl9DQoNCgkJcmV0dXJuICRyOw0KDQoJfQ0KDQoNCgkvKioNCgkqIGNyeXB0bywgZm9uY3Rpb24gcGVybWV0dGFudCBkJ2VuY3J5cHRlciB1bmUgY2hhaW5lIGRlIGNhcmFjdGVyZS4NCiAgICAqDQoJKiBAcGFyYW0gc3RyaW5nLCBkb25uZWUgYSBlbmNyeXB0ZXIuDQoJKiBAcGFyYW0gZnVuY3Rpb24sIHVuZSBmb25jdGlvbiBkZSBjYWxsYmFjay4NCgkqIEByZXR1cm4gc3RyaW5nLCByZXN1bHRhdA0KCSovDQoJcHVibGljIHN0YXRpYyBmdW5jdGlvbiBjcnlwdG8oJGRhdGEsICRjYiA9IG51bGwpDQoJew0KDQoJCSMgT24gcmVjdXBlcmUgbGEgdGFpbGxlIGRlIGxhIGRvbm5lZS4NCgkJc2VsZjo6JGRhdGFMZW4gPSBzdHJsZW4oJGRhdGEpOw0KCQkkciA9IGJhc2U2NF9lbmNvZGUobWNyeXB0X2VuY3J5cHQoTUNSWVBUX1JJSk5EQUVMXzEyOCwgc2VsZjo6JGtleSwgJGRhdGEsIHNlbGY6OiRtb2RlLCBzZWxmOjokcGFydCkpOw0KDQoJCWlmKCRjYiAhPT0gbnVsbCkNCgkJew0KCQkJY2FsbF91c2VyX2Z1bmMoJGNiLCAkcik7DQoJCX0NCg0KCQlyZXR1cm4gJHI7DQoNCgl9DQoNCn0NCg==
EOPAGE;

$doomaili = <<< EOPAGE
PD9waHANCg0KLyoqDQoqIFBIUCwgdW5lIGNsYXNzZSBQSFAgc2ltcGxlLiBEYW5zIGxlIGJ1dCBzaW1wbGlmacOpIGwndXRpbGlzYXRpb24gZGUgUERPDQoqIEBhdXRob3IgRGFraWEgRnJhbmNrIDxkYWtpYWZyYW5ja2luZm9AZ21haWwuY29tPg0KKiBAcGFja2FnZSBEb287DQoqIEB2ZXJzaW9uIDAuMS4wDQoqLw0KDQpuYW1lc3BhY2UgRG9vOw0KDQovKioNCiogRG9vTWFpbCwgY2xhc3NlIHBlcm1ldHRhbnQgZCdlbnZveWVyIGRlcyBtYWlscw0KKi8NCmNsYXNzIERvb01haWxpDQp7DQoNCiAgICAvKioNCiAgICAgKg0KICAgICAqLw0KICAgIGNvbnN0IEZPUk1BVCA9ICI8cHJlPlsNCiAgICAgICAgJ3RvJyA9PiB0b0BtYWlsZG9tYWluLmNvbSwNCiAgICAgICAgJ3N1YmplY3QnID0+IHlvdSBzdWJqZWN0LA0KICAgICAgICAnZGF0YScgPT4geW91ciBkYXRhDQogICAgXTwvcHJlPiI7DQoNCiAgICAvKioNCiAgICAgKiBAdmFyIG51bGwNCiAgICAgKi8NCiAgICBwcml2YXRlICR0byA9IG51bGw7DQogICAgLyoqDQogICAgICogQHZhciBudWxsDQogICAgICovDQogICAgcHJpdmF0ZSAkZnJvbSA9IG51bGw7DQogICAgLyoqDQogICAgICogQHZhciBudWxsDQogICAgICovDQogICAgcHJpdmF0ZSAkc3ViamVjdCA9IG51bGw7DQogICAgLyoqDQogICAgICogQHZhciBudWxsDQogICAgICovDQogICAgcHJpdmF0ZSAkZGF0YSA9IG51bGw7DQoNCiAgICAvKioNCiAgICAgKiBAdmFyIGFycmF5DQogICAgICovDQogICAgcHJpdmF0ZSAkYWRkaXRpb25uYWxIZWFkZXIgPSBbXTsNCg0KICAgIC8qKg0KICAgICAqIEB2YXIgc3RyaW5nDQogICAgICovDQogICAgcHJpdmF0ZSAkaGVhZGVyczsNCg0KICAgIC8qKg0KICAgICAqIEB2YXIgc3RyaW5nDQogICAgICovDQogICAgcHJpdmF0ZSAkY2hhcnNldCA9ICdpc28tODg5Ni0xJzsNCiAgICAvKioNCiAgICAgKiBAdmFyIHN0cmluZw0KICAgICAqLw0KICAgIHByaXZhdGUgJGJvdW5kYXJ5SGFzaDsNCg0KICAgIC8qKg0KICAgICAqIEB2YXIgYXJyYXkNCiAgICAgKi8NCiAgICBwcml2YXRlICRhdHRhY2hlbWVudEZpbGU7DQoNCiAgICAvKioNCiAgICAgKiBAdmFyIHN0cmluZw0KICAgICAqLw0KICAgIHByaXZhdGUgJHR5cGVNaW1lOw0KDQogICAgLyoqDQogICAgICogQHZhciBzdHJpbmcNCiAgICAgKi8NCiAgICBwcml2YXRlICR0ZXh0Ow0KDQogICAgLyoqDQogICAgICogQHZhciBzdHJpbmcNCiAgICAgKi8NCiAgICBwcml2YXRlICRodG1sOw0KDQogICAgZnVuY3Rpb24gX19jb25zdHJ1Y3QoKQ0KICAgIHsNCg0KICAgICAgICAkdGhpcy0+Ym91bmRhcnlIYXNoID0gbWQ1KGRhdGUoInIiLCB0aW1lKCkpKTsNCiAgICAgICAgJHRoaXMtPnR5cGVNaW1lID0gInRleHQvcGxhaW4iOw0KICAgICAgICAkdGhpcy0+ZnJvbSA9IGluaV9nZXQoInNtcHRfZnJvbSIpOw0KDQogICAgfQ0KDQogICAgLyoqDQogICAgICogc2V0VHlwZU1pbWUsIGZvbmN0aW9uIGRlIHJlZGVmaW5pciBsZSB0eXBlIG1pbWUgZHUgbWVzc2FnZSBhIGVudm95ZQ0KICAgICAqDQogICAgICogQHBhcmFtIHN0cmluZyAkbWltZQ0KICAgICAqLw0KICAgIHB1YmxpYyBmdW5jdGlvbiBzZXRUeXBlTWltZSgkbWltZSkNCiAgICB7DQogICAgICAgICR0aGlzLT50eXBlTWltZSA9ICRtaW1lOw0KICAgIH0NCg0KICAgIC8qKg0KICAgICogZnJvbSwgZm9uY3Rpb24gcGVybWV0dGFudCBkZSBkZWZpbmlyIGwnZW52b3lldXIgZGUgbWFpbA0KICAgICoNCiAgICAqIEBwYXJhbSBzdHJpbmcgJGZyb20NCiAgICAqIEBwYXJhbSBEb29NYWlsaSwgT2JqZWN0IERvb01haWxpDQogICAgKiBAcmV0dXJuICR0aGlzDQogICAgKi8NCiAgICBwdWJsaWMgZnVuY3Rpb24gZnJvbSgkZnJvbSkNCiAgICB7DQogICAgICAgIGlmIChpc19zdHJpbmcoJGZyb20pKQ0KICAgICAgICB7DQoNCiAgICAgICAgICAgICR0aGlzLT5mcm9tID0gJGZyb207ICAgICAgICAgICAgDQoNCiAgICAgICAgfQ0KICAgICAgICBlbHNlDQogICAgICAgIHsNCg0KICAgICAgICAgICAgIHNlbGY6OmVycm5vKCJGcm9tOiA8dm90cmUgYWRyZXNzPkA8ZG9tYWluPi48Y29tPiIpOw0KDQogICAgICAgIH0NCg0KICAgICAgICByZXR1cm4gJHRoaXM7DQogICAgfQ0KDQogICAgLyoqDQogICAgKiB0bywgZm9uY3Rpb24gcGVybWV0YW50IGRlIGRlZmluaXIgbGUgZGVzdGluYXRldXIgZGUgbWFpbA0KICAgICoNCiAgICAqIEBwYXJhbSBzdHJpbmcgJHRvDQogICAgKiBAcmV0dXJuIERvb01haWxpLCBPYmplY3QgRG9vTWFpbGkNCiAgICAqLw0KICAgIHB1YmxpYyBmdW5jdGlvbiB0bygkdG8pDQogICAgew0KDQogICAgICAgIGlmIChpc19zdHJpbmcoJHRvKSkNCiAgICAgICAgew0KICAgICAgICANCiAgICAgICAgICAgICR0aGlzLT4kdG8gPSAkdG87DQogICAgICAgIA0KICAgICAgICB9DQogICAgICAgIGVsc2UNCiAgICAgICAgew0KDQogICAgICAgICAgICBzZWxmOjplcnJubygiRXhjZXB0ZWQgcGFyYW1ldGVyIHN0cmluZy4iKTsNCg0KICAgICAgICB9DQogICAgICAgIA0KICAgICAgICByZXR1cm4gJHRoaXM7DQoNCiAgICB9DQoNCiAgICAvKioNCiAgICAqIHN1YmplY3QsIGZvbmN0aW9uIHBlcm1ldGFudCBkZSBkZWZpbmlyIGxlIHN1amV0IGR1IG1haWwNCiAgICAqDQogICAgKiBAcGFyYW0gc3RyaW5nICRzdWINCiAgICAqIEByZXR1cm4gRG9vTWFpbGksIE9iamVjdCBEb29NYWlsaQ0KICAgICovDQogICAgcHVibGljIGZ1bmN0aW9uIHN1YmplY3QoJHN1Yil7DQoNCiAgICAgICAgaWYgKGlzX3N0cmluZygkc3ViKSkNCiAgICAgICAgew0KDQogICAgICAgICAgICAkdGhpcy0+c3ViamVjdCA9ICRzdWI7DQogICAgICAgICAgICANCiAgICAgICAgfQ0KICAgICAgICBlbHNlDQogICAgICAgIHsNCg0KICAgICAgICAgICAgc2VsZjo6ZXJybm8oIkV4Y2VwdGVkIHBhcmFtZXRlciBzdHJpbmcuIik7DQoNCiAgICAgICAgfQ0KDQogICAgICAgIHJldHVybiAkdGhpczsNCg0KICAgIH0NCg0KICAgIC8qKg0KICAgICogZGF0YSwgZm9uY3Rpb24gcGVybWV0dGFudCBkZSBkZWZpbmlyIGxlIG1lc3NhZ2UgYSBlbnZveWVyDQogICAgKg0KICAgICogQHBhcmFtIHN0cmluZyAkbXNnDQogICAgKiBAcmV0dXJuIERvb01haWxpLCBPYmplY3QgRG9vTWFpbGkNCiAgICAqLw0KICAgIHB1YmxpYyBmdW5jdGlvbiBkYXRhKCRtc2cpDQogICAgew0KDQogICAgICAgIGlmIChpc19zdHJpbmcoJG1zZykpDQogICAgICAgIHsNCg0KICAgICAgICAgICAgJHRoaXMtPnRleHQgPSAkbXNnOw0KICAgICAgICAgICAgJHRoaXMtPmRhdGFNYWtlcigpOw0KDQogICAgICAgIH0NCiAgICAgICAgZWxzZQ0KICAgICAgICB7DQoNCiAgICAgICAgICAgIHNlbGY6OmVycm5vKCJFeGNlcHRlZCBwYXJhbWV0ZXIgc3RyaW5nLiIpOw0KDQogICAgICAgIH0NCg0KICAgICAgICByZXR1cm4gJHRoaXM7DQoNCiAgICB9DQoNCiAgICAvKioNCiAgICAqIGFkZEhlYWRlciwgZm9uY3Rpb24gcGVybWV0dGFudCBkJ2Fqb3V0ZXIgZGVzIGhlYWRlcnMgc3VwbGVtZW50YWlyZS4NCiAgICAqDQogICAgKiBAcGFyYW0gc3RyaW5nICRuYW1lLCBsZSBub20gZHUgbm91dmVhdSBoZWFkZXINCiAgICAqIEBwYXJhbSBzdHJpbmcgJHZhbHVlLCBsYSB2YWxldXIgZGUgbm9tIGVudGVyDQogICAgKiBAcmV0dXJuIERvb01haWxpICR0aGlzDQogICAgKi8NCiAgICBwdWJsaWMgZnVuY3Rpb24gYWRkSGVhZGVyKCRuYW1lLCAkdmFsdWUpDQogICAgew0KDQogICAgICAgICR0aGlzLT5hZGRpdGlvbm5hbEhlYWRlcltdID0gInskbmFtZX06IHskdmFsdWV9XHJcbiI7DQogICAgICAgIHJldHVybiAkdGhpczsNCg0KICAgIH0NCg0KICAgIC8qKg0KICAgICAqIGFkZEF0dGFjaGVtZW50RmlsZSwgZm9uY3Rpb24gcGVybWV0dGFudCBkJ2Fqb3V0ZXIgdW5lIGZpY2hpZXINCiAgICAgKg0KICAgICAqIEBwYXJhbSBzdHJpbmcgJGZpbGUNCiAgICAgKiBAcmV0dXJuICR0aGlzDQogICAgICovDQogICAgcHVibGljIGZ1bmN0aW9uIGFkZEF0dGFjaGVtZW50RmlsZSgkZmlsZSkNCiAgICB7DQogICAgICAgIGlmIChpc19zdHJpbmcoJGZpbGUpKQ0KICAgICAgICB7DQoNCiAgICAgICAgICAgICR0aGlzLT5hdHRhY2hlbWVudEZpbGVbXSA9ICRmaWxlOw0KDQogICAgICAgIH0NCg0KICAgICAgICByZXR1cm4gJHRoaXM7DQoNCiAgICB9DQoNCiAgICAvKioNCiAgICAgKiBzZXREZWZhdWx0SGVhZGVycywgZm9uY3Rpb24gcGVybWV0dGFudCBkZSBkZWZpbmlyIGxlcyBoZWFkZXJzIHBhciBkZWZhdXQNCiAgICAgKi8NCiAgICBwcml2YXRlIGZ1bmN0aW9uIHNldERlZmF1bHRIZWFkZXJzKCkNCiAgICB7DQoNCiAgICAgICAgJHRoaXMtPmFkZGl0aW9ubmFsSGVhZGVyW10gPSAnTUlNRS1WZXJzaW9uOiAxLjAnOw0KICAgICAgICAkdGhpcy0+YWRkaXRpb25uYWxIZWFkZXJbXSA9ICJGcm9tOiB7JHRoaXMtPmZyb219IjsNCiAgICAgICAgJHRoaXMtPmFkZGl0aW9ubmFsSGVhZGVyW10gPSAiVG86IHskdGhpcy0+dG99IjsNCiAgICAgICAgJHRoaXMtPmFkZGl0aW9ubmFsSGVhZGVyW10gPSAiU3ViamVjdDogeyR0aGlzLT5zdWJqZWN0fSI7DQoNCiAgICAgICAgIyBXZSdsbCBhc3N1bWUgYSBtdWx0aS1wYXJ0IG1lc3NhZ2Ugc28gdGhhdCB3ZSBjYW4gaW5jbHVkZSBhbiBIVE1MIGFuZCBhIHRleHQgdmVyc2lvbiBvZiB0aGUgZW1haWwgYXQgdGhlDQogICAgICAgICMgdmVyeSBsZWFzdC4gSWYgdGhlcmUgYXJlIGF0dGFjaG1lbnRzLCB3ZSdsbCBiZSBkb2luZyB0aGUgc2FtZSB0aGluZy4NCiAgICAgICAgJHRoaXMtPmFkZGl0aW9ubmFsSGVhZGVyW10gPSAiQ29udGVudC10eXBlOiBtdWx0aXBhcnQvbWl4ZWQ7IGJvdW5kYXJ5PVwiUEhQLW1peGVkLXskdGhpcy0+Ym91bmRhcnlIYXNofVwiIjsNCg0KICAgIH0NCg0KICAgIC8qKg0KICAgICAqIHRleHQsIGZvbmN0aW9uIHBlcm1ldHRhbnQgZGUgY29uZmlndXJlciBsZXMgaGVhZGVycyBwb3VyIGxlcyB0ZXh0L3BsYWluDQogICAgICovDQogICAgcHJpdmF0ZSBmdW5jdGlvbiBkYXRhTWFrZXIoKQ0KICAgIHsNCg0KICAgICAgICAkdGhpcy0+ZGF0YSAuPSAiLS1QSFAtYWx0LXskdGhpcy0+Ym91bmRhcnlIYXNofVxuIjsNCiAgICAgICAgJHRoaXMtPmRhdGEgLj0gIkNvbnRlbnQtVHlwZTogeyR0aGlzLT50eXBlTWltZX07IGNoYXJzZXQ9XCJ7JHRoaXMtPmNoYXJzZXR9XCJcbiI7DQogICAgICAgICR0aGlzLT5kYXRhIC49ICJDb250ZW50LVRyYW5zZmVyLUVuY29kaW5nOiA3Yml0XG5cbiI7DQogICAgICAgICR0aGlzLT5kYXRhIC49ICR0aGlzLT50ZXh0LiJcblxuIjsNCg0KICAgIH0NCiAgICAvKioNCiAgICAqIHNlbmQsIGZvbmN0aW9uIGRlIGRlY2xhbmNoZW1lbnQgZGUgbCdlbnZvaWUgZGUgbWFpbA0KICAgICoNCiAgICAqIEBwYXJhbSBjYWxsYWJsZSAkY2IsIGZvbmN0aW9uIGRlIHJhcHBlbCBwb3VyIHJlY3VwZXJlciBsJ2V0YXQgYXByZXMgZW52b2llIGRlIG1haWwNCiAgICAqLw0KICAgIHB1YmxpYyBmdW5jdGlvbiBzZW5kKCRjYiA9IG51bGwpDQogICAgew0KDQogICAgICAgIGlmIChjb3VudCgkdGhpcy0+YXR0YWNoZW1lbnRGaWxlKSA+PSAxKQ0KICAgICAgICB7DQogICAgICAgICAgICAkdGhpcy0+cHJlcGFyZUF0dGFjaGVtZW50RmlsZSgpOw0KICAgICAgICB9DQoNCiAgICAgICAgaWYgKGNvdW50KCR0aGlzLT5hZGRpdGlvbm5hbEhlYWRlcikgPiAxKQ0KICAgICAgICB7DQoNCiAgICAgICAgICAgICR0aGlzLT5zZXREZWZhdWx0SGVhZGVycygpOw0KICAgICAgICAgICAgJHRoaXMtPmhlYWRlcnMgPSBpbXBsb2RlKFBIUF9FT0wsICR0aGlzLT5hZGRpdGlvbm5hbEhlYWRlcikuUEhQX0VPTDsNCiAgICAgICAgICAgICRzdGF0dXMgPSBAbWFpbCgkdGhpcy0+dG8sICR0aGlzLT5zdWJqZWN0LCAkdGhpcy0+ZGF0YSwgJHRoaXMtPmhlYWRlcnMpOw0KDQogICAgICAgIH0gZWxzZSB7DQoNCiAgICAgICAgICAgICRzdGF0dXMgPSBAbWFpbCgkdGhpcy0+dG8sICR0aGlzLT5zdWJqZWN0LCAkdGhpcy0+ZGF0YSk7DQoNCiAgICAgICAgfQ0KDQogICAgICAgIC8qKiBAdmFyIGNhbGxhYmxlICRjYiAqLw0KICAgICAgICBpZiAoJGNiICE9PSBudWxsKQ0KICAgICAgICB7DQoNCiAgICAgICAgICAgIGlmICghZW1wdHkoJHN0YXR1cykpIHsNCiAgICAgICAgICAgICAgICBjYWxsX3VzZXJfZnVuYygkY2IsICRzdGF0dXMpOw0KICAgICAgICAgICAgfQ0KDQogICAgICAgIH0NCg0KICAgIH0NCg0KICAgIC8qKg0KICAgICogc2V0TWFpbFNlcnZlciwgZm9uY3Rpb24gcGVybWV0dGFudCBkZSBkZWZpbmlyIGRlIHF1ZWwgc2VydmV1ciBsZSBtYWlsIHNlcmEgZW52b3llcg0KICAgICoNCiAgICAqIEBwYXJhbSBzdHJpbmcgJHNlcnZlck5hbWUsIGxlIG5vbSBkZSBzZXJ2ZXVyLCBvdSBsJ2FkcmVzc2UgSVAgZHUgc2VydmV1cg0KICAgICogQHJldHVybiAkdGhpcw0KICAgICovDQogICAgcHVibGljIGZ1bmN0aW9uIHNldE1haWxTZXJ2ZXIoJHNlcnZlck5hbWUpDQogICAgew0KDQogICAgICAgIGlmIChpc19zdHJpbmcoJHNlcnZlck5hbWUpKQ0KICAgICAgICB7DQoNCiAgICAgICAgICAgIGluaV9zZXQoJ1NNVFAnLCAkc2VydmVyTmFtZSk7DQoNCiAgICAgICAgfQ0KICAgICAgICBlbHNlDQogICAgICAgIHsNCg0KICAgICAgICAgICAgc2VsZjo6ZXJybm8oIkV4Y2VwdGVkIHBhcmFtZXRlciBzdHJpbmciKTsNCg0KICAgICAgICB9DQoNCiAgICAgICAgcmV0dXJuICR0aGlzOw0KDQogICAgfQ0KDQogICAgLyoqDQogICAgKiBzZXRQb3J0LCBmb25jdGlvbiBwZXJtZXR0YW50IGRlIGNvbmZpZ3VyZXIgbGUgcG9ydCBzbXRwDQogICAgKg0KICAgICogQHBhcmFtIHN0cmluZyAkcG9ydCwgbGUgbnVtZXJvIGRlIHBvcnQNCiAgICAqIEByZXR1cm4gJHRoaXMNCiAgICAqLw0KICAgIHB1YmxpYyBmdW5jdGlvbiBzZXRQb3J0KCRwb3J0KQ0KICAgIHsNCg0KICAgICAgICBpbmlfc2V0KCdzbXRwX3BvcnQnLCAkcG9ydCk7DQogICAgICAgIHJldHVybiAkdGhpczsNCg0KICAgIH0NCiAgICAvKioNCiAgICAqIGVycm5vLCBmb25jdGlvbiBwZXJtZXR0YW50IGRlZmluaXIgbGUgbWVzc2FnZSBkJ2VycmV1ci4NCiAgICAqDQogICAgKiBAcGFyYW0gc3RyaW5nLCBtZXNzYWdlDQogICAgKi8NCiAgICBwcml2YXRlIHN0YXRpYyBmdW5jdGlvbiBlcnJubygkbXNnKQ0KICAgIHsNCiAgICAgICAgdHJpZ2dlcl9lcnJvcigkbXNnLCBFX1dBUk5JTkcpOw0KICAgICAgICBleGl0KCk7DQogICAgfQ0KDQogICAgLyoqDQogICAgICogcHJlcGFyZUF0dGFjaGVtZW50LCBmb25jdGlvbiBwZXJtZXR0YW50IGQnYWpvdXRlciB1bmUgcGnDqGNlLWpvaW50ZQ0KICAgICAqLw0KICAgIHByaXZhdGUgZnVuY3Rpb24gcHJlcGFyZUF0dGFjaGVtZW50RmlsZSgpDQogICAgew0KICAgICAgICBmb3JlYWNoKCR0aGlzLT5hdHRhY2hlbWVudEZpbGUgYXMgJGZpbGUpDQogICAgICAgIHsNCg0KICAgICAgICAgICAgJGZpbGVuYW1lICA9IGJhc2VuYW1lKCRmaWxlKTsNCiAgICAgICAgICAgICR0aGlzLT5kYXRhIC49ICItLVBIUC1taXhlZC17JHRoaXMtPmJvdW5kYXJ5SGFzaH1cbiI7DQogICAgICAgICAgICAkdGhpcy0+ZGF0YSAuPSAiQ29udGVudC1UeXBlOiBhcHBsaWNhdGlvbi9vY3RldC1zdHJlYW07IG5hbWU9XCJ7JGZpbGVuYW1lfVwiXG4iOw0KICAgICAgICAgICAgJHRoaXMtPmRhdGEgLj0gIkNvbnRlbnQtVHJhbnNmZXItRW5jb2Rpbmc6IGJhc2U2NFxuIjsNCiAgICAgICAgICAgICR0aGlzLT5kYXRhIC49ICJDb250ZW50LURpc3Bvc2l0aW9uOiBhdHRhY2htZW50XG5cbiI7DQogICAgICAgICAgICAkdGhpcy0+ZGF0YSAuPSBjaHVua19zcGxpdChiYXNlNjRfZW5jb2RlKGZpbGVfZ2V0X2NvbnRlbnRzKCRmaWxlKSkpOw0KICAgICAgICAgICAgJHRoaXMtPmRhdGEgLj0gIlxuXG4iOw0KDQogICAgICAgIH0NCg0KICAgICAgICAkdGhpcy0+ZGF0YSAuPSAiLS1QSFAtbWl4ZWQteyR0aGlzLT5ib3VuZGFyeUhhc2h9LS1cblxuIjsNCg0KICAgIH0NCg0KICAgIC8qKg0KICAgICAqIHNldENoYXJzZXQsIGZvbmN0aW9uIHBlcm1ldHRhbnQgZGUgcmVkZWZpbmlyIGwnZW5jb2RhZ2UNCiAgICAgKiBAcGFyYW0gc3RyaW5nICRjaGFyc2V0DQogICAgICovDQogICAgcHVibGljIGZ1bmN0aW9uIHNldENoYXJzZXQoJGNoYXJzZXQpDQogICAgew0KICAgICAgICAkdGhpcy0+Y2hhcnNldCA9ICRjaGFyc2V0Ow0KICAgIH0NCg0KfQ==
EOPAGE;

$doodatamaker = <<< EOPAGE
PD9waHANCg0KLyoqDQoqIFBIUCwgdW5lIGNsYXNzZSBQSFAgc2ltcGxlLiBEYW5zIGxlIGJ1dCBzaW1wbGlmacOpIGwndXRpbGlzYXRpb24gZGUgUERPDQoqIEBhdXRob3IgRGFraWEgRnJhbmNrIDxkYWtpYWZyYW5ja2luZm9AZ21haWwuY29tPg0KKiBAcGFja2FnZSBEb287DQoqIEB2ZXJzaW9uIDAuMS4wDQoqLw0KbmFtZXNwYWNlIERvbzsNCg0KLyoqDQoqIERvbyBkYXRlIG1ha2VyDQoqIENyZWF0ZSBkYXRlIDA1LzA1LzIwMTUNCiovDQovKioNCiAqIENsYXNzIERvb0RhdGVNYWtlcg0KICoNCiAqIEBwYWNrYWdlIERvbw0KICovDQovKioNCiAqIENsYXNzIERvb0RhdGVNYWtlcg0KICoNCiAqIEBwYWNrYWdlIERvbw0KICovDQpjbGFzcyBEb29EYXRlTWFrZXINCnsNCg0KICAgIC8qKg0KICAgICAqIEB2YXINCiAgICAgKi8NCiAgICBwcml2YXRlICR0aW1lc3RhbnA7DQogICAgLyoqDQogICAgICogQHZhciBzdHJpbmcNCiAgICAgKi8NCiAgICBwcml2YXRlICRsb2NhbDsNCg0KICAgIC8qKg0KICAgICAqIEB2YXINCiAgICAgKi8NCiAgICBwcml2YXRlICRzZWNvbmRzOw0KICAgIC8qKg0KICAgICAqIEB2YXINCiAgICAgKi8NCiAgICBwcml2YXRlICRtaW51dGVzOw0KICAgIC8qKg0KICAgICAqIEB2YXINCiAgICAgKi8NCiAgICBwcml2YXRlICRob3VyczsNCg0KICAgIC8qKg0KICAgICAqIEB2YXINCiAgICAgKi8NCiAgICBwcml2YXRlICRkYXlPZlllYXI7DQogICAgLyoqDQogICAgICogQHZhcg0KICAgICAqLw0KICAgIHByaXZhdGUgJGRheU9mV2VlazsNCiAgICAvKioNCiAgICAgKiBAdmFyDQogICAgICovDQogICAgcHJpdmF0ZSAkZGF5T2ZNb250aDsNCiAgICAvKioNCiAgICAgKiBAdmFyDQogICAgICovDQogICAgcHJpdmF0ZSAkbW9udGhPZlllYXI7DQogICAgLyoqDQogICAgICogQHZhcg0KICAgICAqLw0KICAgIHByaXZhdGUgJHllYXI7DQoNCiAgICAvKioNCiAgICAgKiBAcGFyYW0gbnVsbCAkdGltZXN0YW5wDQogICAgICogQHBhcmFtIG51bGwgJGxvY2FsDQogICAgICovDQogICAgZnVuY3Rpb24gX19jb25zdHJ1Y3QoJHRpbWVzdGFucCA9IG51bGwsICRsb2NhbCA9IG51bGwpDQogICAgew0KDQogICAgICAgIGlmKCR0aW1lc3RhbnAgIT09IG51bGwpDQogICAgICAgIHsNCg0KICAgICAgICAgICAgaWYoaXNfc3RyaW5nKCR0aW1lc3RhbnApKQ0KICAgICAgICAgICAgew0KDQogICAgICAgICAgICAgICAgJHRoaXMtPmxvY2FsID0gJHRpbWVzdGFucDsNCiAgICAgICAgICAgICAgICAkdGltZXN0YW5wID0gJHRoaXMtPmxvY2FsICE9PSAiY2lfQ0kiID8gdGltZSgpIDogKHRpbWUoKSAtIDcyMDApOw0KDQogICAgICAgICAgICB9DQogICAgICAgICAgICBlbHNlDQogICAgICAgICAgICB7DQoNCiAgICAgICAgICAgICAgICBpZigkbG9jYWwgIT09IG51bGwpDQogICAgICAgICAgICAgICAgew0KICAgICAgICAgICAgICAgICAgICAkdGhpcy0+bG9jYWwgPSAkbG9jYWw7DQogICAgICAgICAgICAgICAgICAgICR0aW1lc3RhbnAgPSAkbG9jYWwgPT09ICJjaV9DSSIgPyAkdGltZXN0YW5wIC0gNzIwMDogJHRpbWVzdGFucDsNCiAgICAgICAgICAgICAgICB9DQoNCiAgICAgICAgICAgIH0NCg0KICAgICAgICB9DQogICAgICAgIGVsc2UNCiAgICAgICAgew0KICAgICAgICAgICAgJHRoaXMtPmxvY2FsID0gImZyX0ZSIjsNCiAgICAgICAgICAgICR0aW1lc3RhbnAgPSB0aW1lKCkgLSA3MjAwOw0KICAgICAgICB9DQoNCiAgICAgICAgJGluaXREYXRlID0gXGdldGRhdGUoJHRpbWVzdGFucCk7DQoNCiAgICAgICAgJHRoaXMtPnNlY29uZHMgPSAkaW5pdERhdGVbJ3NlY29uZHMnXTsNCiAgICAgICAgJHRoaXMtPm1pbnV0ZXMgPSAkaW5pdERhdGVbJ21pbnV0ZXMnXTsNCiAgICAgICAgJHRoaXMtPmhvdXJzID0gJGluaXREYXRlWydob3VycyddOw0KDQogICAgICAgICR0aGlzLT5kYXlPZldlZWsgPSAkaW5pdERhdGVbJ3dkYXknXTsNCiAgICAgICAgJHRoaXMtPmRheU9mWWVhciA9ICRpbml0RGF0ZVsneWRheSddOw0KICAgICAgICAkdGhpcy0+ZGF5T2ZNb250aCA9ICRpbml0RGF0ZVsibWRheSJdOw0KICAgICAgICAkdGhpcy0+eWVhciA9ICRpbml0RGF0ZVsneWVhciddOw0KICAgICAgICAkdGhpcy0+bW9udGhPZlllYXIgPSAkaW5pdERhdGVbJ21vbiddOw0KDQogICAgICAgICR0aGlzLT50aW1lc3RhbnAgPSAkaW5pdERhdGVbMF07DQoNCiAgICB9DQoNCiAgICAvKioNCiAgICAqIEBwYXJhbSBzdHJpbmcsIHJlZGVmaW5pciBsYSBsb2NhbA0KICAgICovDQogICAgcHVibGljIGZ1bmN0aW9uIHNldExvY2FsKCRsb2NhbCkNCiAgICB7DQoNCiAgICAgICAgaWYoIWlzX3N0cmluZygkbG9jYWwpKQ0KICAgICAgICB7DQogICAgICAgICAgICAkdGhpcy0+bG9jYWwgPSAkbG9jYWw7DQogICAgICAgIH0NCg0KICAgIH0NCg0KICAgIC8qKg0KICAgICogZ2V0RGF5TmFtZSwgZm9uY3Rpb24gcGVybWV0YW50IGRlIHJlY3VwZXJlciBsZSBub20gbGl0dGVyYWwgZHUgam91ci4NCiAgICAqDQogICAgKiBAcGFyYW0gZnVuY3Rpb24sIGZvbmN0aW9uIGRlIHJhcHBlbA0KICAgICogQHJldHVybiBzdHJpbmcNCiAgICAqLw0KICAgIHB1YmxpYyBmdW5jdGlvbiBnZXREYXlOYW1lKCRjYiA9IG51bGwpDQogICAgew0KICAgICAgICAkZGF5ID0gWw0KDQogICAgICAgICAgICAiZnJfRlIiID0+IFsNCiAgICAgICAgICAgICAgICAiRGltYW5jaGUiLCAiTHVuZGkiLCAiTWFyZGkiLCAiTWVyY3JlZGkiLCAiSmV1ZGkiLCAiVmVuZHJlZGkiLCAiU2FtZWRpIg0KICAgICAgICAgICAgXSwNCg0KICAgICAgICAgICAgImVzX0VTIiA9PiBbDQogICAgICAgICAgICAgICAgIiIsICIiLCAiIiwgIiIsICIiLCAiIiwgIiINCiAgICAgICAgICAgIF0NCg0KICAgICAgICBdOw0KDQogICAgICAgIGlmKCR0aGlzLT5sb2NhbCA9PT0gJ2ZyX0ZSJyB8fCAkdGhpcy0+bG9jYWwgPT09ICdlc19FUycgfHwgJHRoaXMtPmxvY2FsID09PSAnY2lfQ0knKQ0KICAgICAgICB7DQoNCiAgICAgICAgICAgIGlmKCR0aGlzLT5sb2NhbCA9PT0gJ2NpX0NJJykNCiAgICAgICAgICAgIHsNCg0KICAgICAgICAgICAgICAgICR0aGlzLT5sb2NhbCA9ICJmcl9GUiI7DQoNCiAgICAgICAgICAgIH0NCg0KICAgICAgICAgICAgJGRheU5hbWUgPSAkZGF5WyR0aGlzLT5sb2NhbF1bJHRoaXMtPmRheU9mV2Vla107DQoNCiAgICAgICAgfQ0KICAgICAgICBlbHNlaWYoJHRoaXMtPmxvY2FsID09PSAnZW5fRU4nKQ0KICAgICAgICB7DQoNCiAgICAgICAgICAgICRkYXlOYW1lID0gXGdldGRhdGUoJHRoaXMtPnRpbWVzdGFucClbIndlZWtkYXkiXTsNCg0KICAgICAgICB9DQoNCiAgICAgICAgaWYoJGNiICE9PSBudWxsKQ0KICAgICAgICB7DQoNCiAgICAgICAgICAgIGNhbGxfdXNlcl9mdW5jKCRjYiwgJGRheU5hbWUpOw0KDQogICAgICAgIH0NCg0KICAgICAgICByZXR1cm4gJGRheU5hbWU7DQogICAgfQ0KDQogICAgLyoqDQogICAgKiBnZXREYXlPZk1vbnRoLCBmb25jdGlvbiBwZXJtZXRhbnQgZCdvYnRlbmlyIGxlIG51bWVybyBkdSBqb3VyIGR1IG1vaXMNCiAgICAqIEBwYXJhbSBmdW5jdGlvbiwgZm9uY3Rpb24gZGUgcmFwcGVsIGZhY3VsdGF0aWYNCiAgICAqID09PT09PT09PT09PT09PT09PT0gZS5nID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09DQogICAgKiAkZGF0ZSA9IG5ldyBEb29EYXRlTWFrZXIoKTsNCiAgICAqIGVjaG8gJGRhdGUtPmdldERheU9mTW9udGgoW2Z1bmN0aW9uXSk7DQogICAgKiAvLyBvcg0KICAgICogJGRhdGUtPmdldERheU9mTW9udGgoZnVuY3Rpb24oJGRheU9mTW9udGgpDQogICAgKiB7DQogICAgKiAgIGVjaG8gJGRhdGVPZk1vbnRoOw0KICAgICogfSk7DQogICAgKg0KICAgICovDQogICAgcHVibGljIGZ1bmN0aW9uIGdldERheU9mTW9udGgoJGNiID0gbnVsbCkNCiAgICB7DQoNCiAgICAgICAgaWYoJGNiICE9PSBudWxsKQ0KICAgICAgICB7DQoNCiAgICAgICAgICAgIGNhbGxfdXNlcl9mdW5jKCRjYiwgJHRoaXMtPmRheU9mV2Vlayk7DQoNCiAgICAgICAgfQ0KDQogICAgICAgIHJldHVybiAkdGhpcy0+ZGF5T2ZXZWVrOw0KDQogICAgfQ0KDQogICAgLyoqDQogICAgICogQHBhcmFtIG51bGwgJGNiDQogICAgICogQHJldHVybiBtaXhlZA0KICAgICAqLw0KICAgIHB1YmxpYyBmdW5jdGlvbiBnZXRZZWFyKCRjYiA9IG51bGwpDQogICAgew0KDQogICAgICAgIGlmKCRjYiAhPT0gbnVsbCkNCiAgICAgICAgew0KDQogICAgICAgICAgICBjYWxsX3VzZXJfZnVuYygkY2IsICR0aGlzLT55ZWFyKTsNCg0KICAgICAgICB9DQoNCiAgICAgICAgcmV0dXJuICR0aGlzLT55ZWFyOw0KDQogICAgfQ0KDQogICAgLyoqDQogICAgICogQHBhcmFtIG51bGwgJGNiDQogICAgICogQHJldHVybiBtaXhlZA0KICAgICAqLw0KICAgIHB1YmxpYyBmdW5jdGlvbiBnZXRNb250aE9mWWVhcigkY2IgPSBudWxsKQ0KICAgIHsNCg0KICAgICAgICBpZigkY2IgIT09IG51bGwpDQogICAgICAgIHsNCg0KICAgICAgICAgICAgY2FsbF91c2VyX2Z1bmMoJGNiICwkdGhpcy0+bW9udGhPZlllYXIpOw0KDQogICAgICAgIH0NCg0KICAgICAgICByZXR1cm4gJHRoaXMtPm1vbnRoT2ZZZWFyOw0KDQogICAgfQ0KICAgIC8qKg0KICAgICogZ2V0TW9udGhOYW1lLCBmb25jdGlvbiBwZXJtZXR0YW50IGRlIHJlY3VwZXJlciBsZSBub20gZCd1biBtb2lzDQogICAgKiBAcGFyYW0gZnVuY3Rpb24sIHVuZSBmb25jdGlvbiBkZSByYXBwZWwNCiAgICAqIEByZXR1cm4gc3RyaW5nLCBsZSBub20gZHUgbW9pcw0KICAgICovDQogICAgcHVibGljIGZ1bmN0aW9uIGdldE1vbnRoTmFtZSgkY2IgPSBudWxsKQ0KICAgIHsNCg0KICAgICAgICAkbW9udGggPSBbDQoNCiAgICAgICAgICAgICJmcl9GUiIgPT4gWw0KICAgICAgICAgICAgICAgICJKYW52aWVyIiwgIkZldnJpZXIiLCAiTWFycyIsDQogICAgICAgICAgICAgICAgIkF2cmlsIiwgIk1haSIsICJKdWluIiwNCiAgICAgICAgICAgICAgICAiSnVpbGxldCIsICJBb3V0IiwgIlNwdGVtYnJlIiwNCiAgICAgICAgICAgICAgICAiT2N0b2JyZSIsICJOb3ZlbWJyZSIsICJEZWNlbWJyZSINCiAgICAgICAgICAgIF0sDQoNCiAgICAgICAgICAgICJlc19FUyIgPT4gWw0KICAgICAgICAgICAgICAgICJMdW5lcyIsICJNYXJ0ZXMiLCAiTWllcmNvbGVzIiwNCiAgICAgICAgICAgICAgICAiTW9udGhBdEVzIiwgIk1vbnRoQXRFcyIsICJNb250aEF0RXMiLA0KICAgICAgICAgICAgICAgICJNb250aEF0RXMiLCAiTW9udGhBdEVzIiwgIk1vbnRoQXRFcyIsDQogICAgICAgICAgICAgICAgIk1vbnRoQXRFcyIsICJNb250aEF0RXMiLCAiTW9udGhBdEVzIg0KICAgICAgICAgICAgICAgIF0NCg0KICAgICAgICBdOw0KDQogICAgICAgIGlmKCR0aGlzLT5sb2NhbCA9PT0gJ2ZyX0ZSJyB8fCAkdGhpcy0+bG9jYWwgPT09ICdlc19FUycgfHwgJHRoaXMtPmxvY2FsID09PSAnY2lfQ0knKQ0KICAgICAgICB7DQoNCiAgICAgICAgICAgIGlmKCR0aGlzLT5sb2NhbCA9PT0gJ2NpX0NJJykNCiAgICAgICAgICAgIHsNCg0KICAgICAgICAgICAgICAgICR0aGlzLT5sb2NhbCA9ICdmcl9GUic7DQoNCiAgICAgICAgICAgIH0NCg0KICAgICAgICAgICAgJG1vbnRoTmFtZSA9ICRtb250aFskdGhpcy0+bG9jYWxdWyR0aGlzLT5tb250aE9mWWVhciAtIDFdOw0KDQogICAgICAgIH0NCiAgICAgICAgZWxzZWlmKCR0aGlzLT5sb2NhbCA9PT0gJ2VuX0VOJykNCiAgICAgICAgew0KDQogICAgICAgICAgICAkbW9udGhOYW1lID0gZ2V0ZGF0ZSgkdGhpcy0+dGltZXN0YW5wKVsibW9udGgiXTsNCg0KICAgICAgICB9DQoNCiAgICAgICAgcmV0dXJuICRtb250aE5hbWU7DQoNCiAgICB9DQoNCiAgICAvKioNCiAgICAqIGZvcm1hdCwgZm9uY3Rpb24gcGVybWV0dGFudCBkZSBmb3JtYXQgZGVzIGRhdGVzIGVuIGZvbmN0aW9uIGRlcyBiZXNpb24NCiAgICAqIEBwYXJhbSBzdHJpbmcsIGZvcm1hdGFnZSBlLmc6IFktbS1kIEg6bTpzDQogICAgKiBAcGFyYW0gZm9uY3Rpb24sIGZvbmN0aW9uIGRlIHJhcHBlbCBwb3V2YW50IHJlY3VwZXJlciBsZSByZXN1bHRhdA0KICAgICogQHJldHVybiBzdHJpbmcsIHJlcHJlc2VudGFudCBsZSBkYXRlIGZvcm1hdA0KICAgICovDQogICAgcHVibGljIGZ1bmN0aW9uIGZvcm1hdCgkZm9ybWF0LCAkY2IgPSBudWxsKQ0KICAgIHsNCg0KICAgICAgICAkZGF0ZSA9IFxkYXRlKCRmb3JtYXQpOw0KDQogICAgICAgIGlmKCRjYiAhPT0gbnVsbCkNCiAgICAgICAgew0KDQogICAgICAgICAgICBjYWxsX3VzZXJfZnVuYygkY2IsICRkYXRlKTsNCg0KICAgICAgICB9DQoNCiAgICAgICAgcmV0dXJuICRkYXRlOw0KDQogICAgfQ0KDQoNCiAgICAvKioNCiAgICAqIGFkZERheSwgZm9uY3Rpb24gcGVybWV0YW50IGQnYWpvdXRlciBkZXMgam91cnMNCiAgICAqIEBwYXJhbSBpbnQsIHVuIHRpbWVzdGFucA0KICAgICogQHJldHVybiBEb29EYXRlTWFrZXIsIGF2ZWMgbCdham91dCBkZXMgam91cnMNCiAgICAqLw0KICAgIHB1YmxpYyBmdW5jdGlvbiBhZGREYXkoJGRheU51bWJlcikNCiAgICB7DQoNCiAgICAgICAgcmV0dXJuIG5ldyBEb29EYXRlTWFrZXIoJHRoaXMtPnRpbWVzdGFucCArICgkZGF5TnVtYmVyICogMjQgKiAzNjAwKSwgJHRoaXMtPmxvY2FsKTsNCg0KICAgIH0NCg0KICAgIC8qKg0KICAgICogYWRkTW9udGgsIGZvbmN0aW9uIHBlcm1ldGFudCBkJ2Fqb3V0ZXIgZGVzIG1vaXMNCiAgICAqDQogICAgKiBAcGFyYW0gaW50ICRtb250aE51bWJlciwgdW4gdGltZXN0YW1wDQogICAgKiBAcGFyYW0gbnVsbCAkY2IsIHVuIGNhbGxhYmxlDQogICAgKiBAcmV0dXJuIERvb0RhdGVNYWtlciwgYXZlYyBsJ2Fqb3V0IGRlcyBqb3Vycw0KICAgICovDQogICAgcHVibGljIGZ1bmN0aW9uIGFkZE1vbnRoKCRtb250aE51bWJlciwgJGNiID0gbnVsbCkNCiAgICB7DQogICAgICAgIGlmKCRtb250aE51bWJlciA8IDApDQogICAgICAgIHsNCg0KICAgICAgICAgICAgaWYoJGNiICE9PSBudWxsKQ0KICAgICAgICAgICAgew0KDQogICAgICAgICAgICAgICAgY2FsbF91c2VyX2Z1bmMoJGNiLCBuZXcgXEV4Y2VwdGlvbigiRXJyb3IsIHZlcmlmeSBvZmZzZXQgPT4gbm90IGFjY2VwdGVkIG5lZ2F0aXZlIG9mZnNldCIpKTsNCiAgICAgICAgICAgICAgICByZXR1cm4gbnVsbDsNCg0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgZWxzZQ0KICAgICAgICAgICAgew0KDQogICAgICAgICAgICAgICAgdHJpZ2dlcl9lcnJvcigiRXJyb3IsIHZlcmlmeSBvZmZzZXQgPT4gbm90IGFjY2VwdGVkIG5lZ2F0aXZlIG9mZnNldCIsIEVfVVNFUl9XQVJOSU5HKTsNCg0KICAgICAgICAgICAgfQ0KDQoNCiAgICAgICAgfQ0KDQogICAgICAgICRtb250aCA9IFsNCiAgICAgICAgICAgIDMxLCAyOCwgMzEsDQogICAgICAgICAgICAzMCwgMzEsIDMwLA0KICAgICAgICAgICAgMzEsIDMxLCAzMCwNCiAgICAgICAgICAgIDMxLCAzMCwgMzENCiAgICAgICAgXTsNCg0KICAgICAgICAkc29tT2ZEYXkgPSAwOw0KDQogICAgICAgICRpID0gJHRoaXMtPm1vbnRoT2ZZZWFyOw0KDQogICAgICAgIHdoaWxlKCRtb250aE51bWJlci0tKQ0KICAgICAgICB7DQoNCiAgICAgICAgICAgIGlmKCRpID4gMTEpew0KICAgICAgICAgICAgICAgICRpID0gMDsNCiAgICAgICAgICAgIH0NCg0KICAgICAgICAgICAgJHNvbU9mRGF5ICs9ICRtb250aFskaV07DQogICAgICAgICAgICAkaSsrOw0KDQogICAgICAgIH0NCg0KICAgICAgICAkciA9ICRzb21PZkRheSArICgkbW9udGhbJHRoaXMtPm1vbnRoT2ZZZWFyIC0gMV0gLSAkdGhpcy0+ZGF5T2ZNb250aCk7DQoNCiAgICAgICAgcmV0dXJuIG5ldyBEb29EYXRlTWFrZXIodGltZSgpICsgKCRyICogMjQgKiAzNjAwKSwgJHRoaXMtPmxvY2FsKTsNCg0KICAgIH0NCg0KICAgIC8qKg0KICAgICogc2Vjb25kcywgZm9uY3Rpb24gcGVybWV0YW50IGRlIHJlY3VwZXJlciBsZXMgc2Vjb25kcw0KICAgICoNCiAgICAqIEByZXR1cm4gaW50LCBub21icmUgZGUgc2Vjb25kcw0KICAgICovDQogICAgcHVibGljIGZ1bmN0aW9uIHNlY29uZHMoKQ0KICAgIHsNCg0KICAgICAgICByZXR1cm4gJHRoaXMtPnNlY29uZHM7DQoNCiAgICB9DQoNCg0KICAgIC8qKg0KICAgICogaG91cnMsIGZvbmN0aW9uIHBlcm1ldGFudCBkZSByZWN1cGVyZXIgbGVzIGhldXJlcw0KICAgICoNCiAgICAqIEByZXR1cm4gaW50LCBub21icmUgZGUgaGV1cmVzDQogICAgKi8NCiAgICBwdWJsaWMgZnVuY3Rpb24gaG91cnMoKQ0KICAgIHsNCg0KICAgICAgICByZXR1cm4gJHRoaXMtPmhvdXJzOw0KDQogICAgfQ0KDQogICAgLyoqDQogICAgKiBtaW51dGVzLCBmb25jdGlvbiBwZXJtZXRhbnQgZGUgcmVjdXBlcmVyIGxlcyBtaW51dGVzDQogICAgKg0KICAgICogQHJldHVybiBpbnQsIG5vbWJyZSBkZSBtaW51dGUNCiAgICAqLw0KICAgIHB1YmxpYyBmdW5jdGlvbiBtaW51dGVzKCkNCiAgICB7DQoNCiAgICAgICAgcmV0dXJuICR0aGlzLT5taW51dGVzOw0KDQogICAgfQ0KDQp9DQo=
EOPAGE;


    if (isset($argv[2])) {
        $path = $argv[2];
    } else {
        $path = "App";
    }
    if (!is_dir($path)) {
      mkdir("{$path}/Doo", 0777, true);
    } else {
       die("this project exists ...\n");
    }

    mkdir("{$path}/controller", 0777);
    mkdir("{$path}/model", 0777);
    mkdir("{$path}/views", 0777);

    mkdir("{$path}/public/js", 0777, true);
    mkdir("{$path}/public/css", 0777, true);
    mkdir("{$path}/public/image", 0777, true);

    touch("{$path}/public/js/app.js");
    touch("{$path}/public/css/style.css");

    touch("{$path}/Doo/Autoload.php");
    touch("{$path}/Doo/Doo.php");
    touch("{$path}/Doo/Doodata.php");
    touch("{$path}/Doo/DooDateMaker.php");
    touch("{$path}/Doo/Doodb.php");
    touch("{$path}/Doo/DooMaili.php");
    touch($path . "/index.php");

    file_put_contents("{$path}/Doo/Autoload.php", base64_decode($autoload));
    file_put_contents("{$path}/Doo/Doo.php", base64_decode($doo));
    file_put_contents("{$path}/Doo/Doodata.php", base64_decode($doodata));
    file_put_contents("{$path}/Doo/DooDateMaker.php", base64_decode($doodatamaker));
    file_put_contents("{$path}/Doo/Doodb.php", base64_decode($doodb));
    file_put_contents("{$path}/Doo/DooMaili.php", base64_decode($doomaili));

    $h = strtoupper($path);

    echo "Doo project created\n";
    echo "Project name: <{$h}>\n|_Doo/\n.  |_Autoload.php\n.  |_Doo.php\n.  |_Doodata.php\n.  |_DooDataMaker.php\n.  |_Doodb.php\n.  |_DooMaili.php\n";
    echo "|_model\n|_views\n|_controller\n|_index.php\n";

}

// Si vous avez desider de creer votre dsn de connection
if(isset($argv[3]) && $argv[3] === "--dsn")
{

    if(isset($argv[4]))
    {

        mkdir("{$path}/appconfig", 0777);

        touch("{$path}/appconfig/app.conf");
        file_put_contents("{$path}/appconfig/app.conf", base64_encode($argv[4]));

    }

}
